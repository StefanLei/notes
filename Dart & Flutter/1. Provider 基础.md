#### Provider 基础教程

1. 定义一个继承 `ChangeNotifer` 的状态类，有的地方称为 `model`
2. 在需要用到这个状态的 `widget` 的父 `widget` 上注册
3. 在 `widget` 中使用

---

1. 定义状态类

```dart
class Counter extends ChangeNotifier {
  int _count = 0;

  get count => _count;

  void increment() {
    _count++;
    notifyListeners();
  }
}

```

2. 在父组件上注册

```dart
import 'package:flutter/material.dart';
import 'package:provider/provider.dart';

void main() => runApp(MyApp());

class MyApp extends StatelessWidget {
  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Flutter Demo',
      theme: ThemeData(
        primarySwatch: Colors.blue,
      ),
      // 我们需要在 ShowPage() 中使用，所以在 ShowPage 的上一级注册.
      home: ChangeNotifierProvider.value(
        value: Counter(),
        child: ShowPage(),
      ),
    );
  }
}
```

3. 在组件中使用

```dart
class ShowPage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    // 通过这个方式获取状态类
    final counter = Provider.of<Counter>(context);

    return Scaffold(
      appBar: AppBar(
        title: Text('测试'),
      ),
      body: Container(
        child: Column(
          children: <Widget>[
            Text('${counter.count}'),
            RaisedButton(
              child: Text("增加"),
              onPressed: () {
                counter.increment();
              },
            ),
          ],
        ),
      ),
    );
  }
}


// 或者通过 Consumer 方式获取状态
class ShowPage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('测试'),
      ),
      body: Container(
        child: Column(
          children: <Widget>[
            // 这里就是通过 Consumer 获取的状态
            Consumer<Counter>(
              builder: (ctx, counter, context) {
                return Text("${counter.count}");
              },
            ),
            Consumer<Counter>(
              builder: (ctx, counter, context) {
                return RaisedButton(
                  child: Text("增加"),
                  onPressed: () {
                    counter.increment();
                  },
                );
              },
            ),
          ],
        ),
      ),
    );
  }
}
```

